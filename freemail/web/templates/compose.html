{{template "base" .}}
{{define "content"}}
<div class="compose-view">
    <h2>Compose Message</h2>

    <form method="POST" action="/compose" id="compose-form">
        <div class="form-group">
            <label for="to">To:</label>
            <input type="text" id="to" name="to" required placeholder="user@identity.freemail"
                   value="{{if .Message}}{{range $i, $from := .Message.To}}{{$from.String}}{{end}}{{end}}">
        </div>

        <div class="form-group">
            <label for="subject">Subject:</label>
            <input type="text" id="subject" name="subject"
                   value="{{if .Message}}Re: {{.Message.Subject}}{{end}}">
        </div>

        <div class="form-group">
            <label for="body">Message:</label>
            <textarea id="body" name="body" rows="15">{{if .Message}}

--- Original Message ---
From: {{if .Message.From}}{{.Message.From.String}}{{end}}
Date: {{.Message.Date.Format "Mon, Jan 02 2006 15:04:05 MST"}}
Subject: {{.Message.Subject}}

{{printf "%s" .Message.Body}}{{end}}</textarea>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn btn-primary">Send</button>
            <a href="/inbox" class="btn">Cancel</a>
        </div>
    </form>
</div>
{{end}}
